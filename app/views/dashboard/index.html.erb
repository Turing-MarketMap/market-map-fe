<h1>Market Map</h1>

<div class="filters">
  <%= form_with url: '/listings', method: :post, local: true do |f| %>
    <%= f.label :make %>
    <%= f.select(:make, ["a","b"]) %>
    <%= f.label :model %>
    <%= f.select(:model, ["a","b"]) %>
  <% end %>

</div>

<div class="js_chart">
  <canvas id="myChart" width="600" height="150"></canvas>
  <script type="text/javascript">
    const ctx = document.getElementById('myChart').getContext('2d');
    const mixedChart = new Chart(ctx, {
      type: 'scatter',
      data: {
          datasets: [{
              type: 'scatter',
              label: 'Listings',
              data: [[1,1],[1,2],[0,1],[3,3],[2.6,2],[1.8,1.4]],
              pointBackgroundColor: 'rgba(0,0,200,1)',
              pointBorderColor: 'rgba(0,0,0,.1)',
              pointRadius: 2,
              pointHoverRadius: 20
          }, {
              type: 'line',
              label: 'Regression',
              data: [],
              //data: [[0,1.1],[1,1.6], [2,1.6],[2.5,1.9],[3,2.6]],
              borderColor: 'rgba(255,150,150,1)',
              borderJoinStyle: 'bevel',
              borderWidth: 4,
              pointBackgroundColor: 'rgba(200,0,0,1)',
              pointBorderColor: 'rgba(0,0,0,.1)',
          }]
      },
      options: {
        scales: {
          y: {
            title: {
              color: 'grey',
              display: true,
              text: 'Price'
            }
          },
          x: {
            title: {
              color: 'grey',
              display: true,
              text: 'Mileage'
            }
          }
        }
      }
    });
  </script>
</div>
